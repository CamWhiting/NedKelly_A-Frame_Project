<!DOCTYPE html>
<html lang="en">
<!--Remember to upload document to a https: page and not http as there are security risks that will refrain the page access otherwise-->
  
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ned Kelly Experiment</title>
        
        <!-- A-Frame library + Effects -->
        <script src="js/A-Frame/aframe.min.js"></script>
        <script src="js/A-Frame/aframe-extra-min.js"></script>
        <script src="js/A-Frame/aframe-rain.min.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
        
        <!-- Custom CSS/JS -->
        <link rel="stylesheet" type="text/css" href="css/main.css"> 
        <script src="js/custom.js"></script>
    </head>
    
    <body>       
    
    <!-- Dying/Blacking Out -->  
    <div id="blackout">
        <div id="question">
            <p>You have died. But who even are you? Did you figure it out? Write your answer below:
            </p>
            <input id="answerValue"> 
            <button type="button" onclick="answer()">Submit</button>
            <p id="answer"></p>
            <p>If you give up, you can see the correct answer here: <a href="https://en.wikipedia.org/wiki/Ned_Kelly">ANSWER</a></p>
        </div>
    </div>  
               
        
    <!-- stats -->
    <a-scene 
        id="theAnswer"     
        nedkelly-logic
        rain="splash: false" 
        renderer="alpha: false;"  
        background="color: #22251E"
        vr-mode-ui="enabled: false"
    >
        
          <!-- Camera Settings. -->   
        <a-entity 
          id="cam"
          position="3.00497 21.37694 14.26701" 
          rotation="32.00886018277858 -160.30786149965303 2.7118092443541864"
          >
            
            <a-camera   
                id="a_cam"      
                position="-1.58721 32.62425 -9.63607" 
                user-height="2.6" 
                wasd-controls-enabled="true" 
                look-controls="pointerLockEnabled: true" 
                near="0.05"
                scale="100 100 100"      
                >
            <a-entity 
                id="cursor"      
                position="0 0 -0.1"      
                scale="0.001 0.001 0.001"
                geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02;"
                material="color: black; shader: flat; opacity: 0.5"
                cursor="fuse: true"
                animation="startEvents: fusing; property: scale; dur: 1500; from: 0.25 0.25 0.25; to: 0.1 0.1 0.1; easing: easeInOutQuad;">
                </a-entity>
                
                <!-- All internal dialogue -->
                    <a-text id="waterText" class="a-text" align="center" value="Thank god for the murky waters of Stringybark Creek. Without it I would have been had for sure!" color="white" height="0.1" width="0.1" visible="false" position="0 -0.07 -0.1"></a-text>
                
                    <a-text id="death" class="a-text" align="center" value="Agh! Such is life..." color="white" height="0.1" width="0.1" visible="false" position="0 -0.07 -0.1"></a-text>
                
                   
                
                    <a-entity id="policeText" 
                            class="a-text" 
                            text="align: center;
                                  value: Constable Strahan. You'll 'gun us down like dogs', eh? Just you wait...  soon the world will see how corrupt you really are.;
                                  color: white;
                                  visible: false;
                                  wrap-count: 35"
                            position= "0 -0.07 -0.1"
                            geometry="primitive: plane; width: auto; height: 0.158"
                            material="color: #000;"
                            scale="0.085 0.085 0">
                    </a-entity>
                  
         
                            
                    <a-entity id="kellyText" 
                            visible="false" 
                            class="a-text" 
                            text="align: center;
                                  value: Look at me. Soaked, cold and an outlaw. I wonder what my father would think of me if he were alive;
                                  color: white;
                                  visible: false;
                                  wrap-count: 35"
                            position= "0 -0.07 -0.1"
                            geometry="primitive: plane; width: auto; height: auto;"
                            material="color: #000;"
                            scale="0.085 0.085 0">
                    </a-entity>
         
                   <a-entity id="backgroundText" 
                             class="a-text" 
                             text="align: center;
                                  value: We've got to get out of Wombat Ranges, the police are onto us.;
                                  color: white;
                                  visible: false;
                                  wrap-count: 35"
                             position= "0 -0.07 -0.1"
                            geometry="primitive: plane; width: auto; height: auto"
                            material="color: #000;"
                            scale="0.085 0.085 0"></a-entity>
                
                
            </a-camera>
         </a-entity>
            
            
        
            <!-- Air Gauge -->
        <p id="airSymbol">Oâ‚‚</p>
        <progress id="air" max="100" value="100"><p><strong>O</strong></p></progress>

            <!-- Score -->
            <div id="score-bg">
                <strong class="notSelectable">SCORE
                    <div id="score">0</div>
                </strong> 
            </div>

        <!-- Asset management system. -->
        <a-assets>
            <a-asset-item id="nedkelly-gtlf" src="models/nedKelly-headless.glb" response-type="arraybuffer"></a-asset-item>

            <a-asset-item id="police-gtlf" src="models/police+gun.glb" response-type="arraybuffer"></a-asset-item>

            <a-asset-item id="environment-gtlf" src="models/lake-environment.glb" response-type="arraybuffer"></a-asset-item>

            <a-asset-item id="lilypad-gtlf" src="models/lilypads.glb" response-type="arraybuffer"></a-asset-item>

            <a-asset-item id="reed-gtlf" src="models/reed.glb" response-type="arraybuffer"></a-asset-item>

            <a-asset-item id="water-gtlf" src="models/water2.glb" response-stype="arraybuffer"></a-asset-item>

        </a-assets>

        

        <!-- Lighting -->
        <a-light type="hemisphere" intensity=".6" light=""></a-light>
        <a-light id="moon-spot" 
                 light="distance: 1000; castShadow:true; decay: 0.48; shadowBias: -0.010; shadowMapHeight: 480.36; shadowMapWidth: 511.76; shadowRadius: 3" 
                 type="spot"
                 intensity="1.3" 
                 rotation="-74.1567815081922 179.9998479605043 179.9998479605043" 
                 position="0 5.939 -6.93838" 
                 penumbra="0.5"
                 >
        </a-light>
        <a-sky  
                color= "#22251e";
                event-set__enter="_event: mouseenter; _target: #backgroundText; visible: true"
                event-set__leave="_event: mouseleave;  _target: #backgroundText; visible: false"
               >
        </a-sky>

        <!-- Models -->
        <a-entity id="nedkelly" gltf-model="#nedkelly-gtlf" rotation="0 -180 0" position="-1.353 -1.623 4" scale="0.01 0.01 0.01" animation-mixer>
        </a-entity>
        
        <!-- Plane used for Ned Kelly dialogue. As camera is parented to mesh, if the text were added to Ned Kelly mesh, it would display constantly.-->
         <a-plane id="nedcollider" position="-1.38981 -1.5764 4.12062" rotation= "-90 0 0" scale="1.25305 1.88219 1"   visible="false" 
        event-set__enter="_event: mouseenter; _target: #kellyText; visible: true"
        event-set__leave="_event: mouseleave;  _target: #kellyText; visible: false"></a-plane>
        
        <!-- Police Mesh -->
         <a-entity 
                    id="police" 
                    gltf-model="#police-gtlf" 
                    position="-0.434 -0.20594 -0.46" 
                    rotation="-12.874 170.981 2.449" 
                    scale="0.007 0.007 0.007" 
                    shadow="cast: true" 
                    animation-mixer 
                   >
        </a-entity>
    
        <!-- Plane used for policeman dialogue. As the character's hit box exported with errors -->
        <a-plane id="policecollider" scale="0.87781 1.83953 1" rotation="0 -14.805802383975601 0" position="-0.56218 0.60496 0.51596" visible="false" 
        event-set__enter="_event: mouseenter; _target: #policeText; visible: true"
        event-set__leave="_event: mouseleave;  _target: #policeText; visible:  false"></a-plane>
        
        
        <!-- Environment -->
        <a-entity id="environment" gltf-model="#environment-gtlf" rotation="0 90 0" scale="5.5 5.5 5.5" shadow="cast: true; receive: true">
        </a-entity>

            <a-entity id="reed-2" rotation="0 0 -15.05446606706238" scale="0.13941 0.13941 0.13941" position="-3.49988 -0.54034 2.61724" gltf-model="#reed-gtlf">
            </a-entity>

            <a-entity id="reed-3" scale="0.13941 0.26012 0.13941" rotation="-7.426678940485732 8.703228908037206 11.924397632262693" position="0.75318 -0.93402 2.09461" gltf-model="#reed-gtlf">
            </a-entity>

            <a-entity id="reed-4" scale="0.13941 0.27371 0.13941" rotation="0 -171.6690416193021 0" position="0.5005 -0.71469 1.64121" gltf-model="#reed-gtlf">
            </a-entity>

        <a-entity id="lilypad" position="-0.2477 0.01656 0" scale="5.5 5.5 5.5" rotation="0 90 0" gltf-model="#lilypad-gtlf" animation-mixer="loop:repeat">
        </a-entity>

        <a-entity id="water" position="-0.10498 -0.04658 0" scale="5.5 5.5 5.5" rotation="0 90 0" gltf-model="#water-gtlf" animation-mixer
        event-set__enter="_event: mouseenter; _target: #waterText; visible: true"
        event-set__leave="_event: mouseleave;  _target: #waterText; visible: false">
        </a-entity>
        
      
        
    </a-scene>
</body>